<!DOCTYPE html>
<html lang="en">

<head>

	<!-- Meta Tag -->
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<!-- SEO -->
	<meta name="author" content="drakecb">
	<meta name="url" content="http://cbpi.github.io">
	<meta name="baidu-site-verification" content="ddtIL6Awza" />
    <meta name="description" content="实际项目开发，经常会碰到可以复用的代码，可以自己写一个属于自己的代码库解决实际生产问题。">
	<title>项目中常用的js封装</title>

	<!-- Favicon -->
	<link rel="shortcut icon" href="/images/avatar.jpeg">
	<link rel="apple-touch-icon-precomposed" type="image/png" href="/images/avatar.jpeg" sizes="114x114">

	<!-- All CSS Plugins -->
	<link rel="stylesheet" type="text/css" href="/css/rouge.css">
	<link rel="stylesheet" type="text/css" href="/css/plugin.css">

	<!-- Main CSS Stylesheet -->
	<link rel="stylesheet" type="text/css" href="/css/style.css">

	<!-- Google Web Fonts  -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:400,300,500,600,700">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">

	<!-- HTML5 shiv and Respond.js support IE8 or Older for HTML5 elements and media queries -->
	<!--[if lt IE 9]>
	   <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
	   <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
	<script type="text/javascript" src="/js/jquery.min.js"></script>
	<!-- <script type="text/javascript" src="/js/jquery.query.js"></script> -->
	<!-- 百度统计 -->
	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "https://hm.baidu.com/hm.js?96715dc203611cdcb5539a15664fe630";
	  var s = document.getElementsByTagName("script")[0];
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>


</head>

<body>

<!-- Preloader Start -->
<div class="preloader">
	<div class="rounder"></div>
</div>
<!-- Preloader End -->
<div id="main">
	<div class="container">
		<div class="row">
			<!-- About Me (Left Sidebar) Start -->
<div class="col-md-3">
	<div class="about-fixed">
		<div class="my-pic">
			<img src="/images/avatar.jpeg" alt="">
			<a href="javascript:void(0)" class="collapsed" data-target="#menu" data-toggle="collapse"><i class="icon-menu menu"></i></a>
			<div id="menu" class="collapse">
				<ul class="menu-link">
					<li><a href="/">首页</a></li>
					<li><a href="/about">关于</a></li>
					<li><a href="/category">分类</a></li>
				</ul>
			</div>
		</div>
		<div class="my-detail">
			<div class="white-spacing">
				<h1>Drake</h1>
				<span>从事前端，爱研究，爱猫</span>
			</div>
			<ul class="social-icon">
				<li><a href="https://weibo.com/bo0918" target="_blank" class="weibo"><i class="fab fa-weibo"></i></a></li>
				<li><a href="https://twitter.com/pii0918" target="_blank" class="twitter"><i class="fab fa-twitter"></i></a></li>
				<li><a href="https://www.instagram.com/pi0918pi/" target="_blank" class="instagram"><i class="fab fa-instagram"></i></a></li>
				<li><a href="https://github.com/cbpi" target="_blank" class="github"><i class="fab fa-github"></i></a></li>
			</ul>
		</div>
	</div>
	<div class="category-list">
		
		<p>
			<a href="/category.html?category=JavaScript" title="view all posts">JavaScript(6)</a>
		</p>
		
		<p>
			<a href="/category.html?category=工具" title="view all posts">工具(6)</a>
		</p>
		
		<p>
			<a href="/category.html?category=Git" title="view all posts">Git(4)</a>
		</p>
		
		<p>
			<a href="/category.html?category=Gulp" title="view all posts">Gulp(5)</a>
		</p>
		
		<p>
			<a href="/category.html?category=Jekyll" title="view all posts">Jekyll(6)</a>
		</p>
		
		<p>
			<a href="/category.html?category=css" title="view all posts">css(1)</a>
		</p>
		
		<p>
			<a href="/category.html?category=Markdown" title="view all posts">Markdown(1)</a>
		</p>
		
		<p>
			<a href="/category.html?category=vue" title="view all posts">vue(2)</a>
		</p>
		
		<p>
			<a href="/category.html?category=solution" title="view all posts">solution(1)</a>
		</p>
		
	</div>
</div>
<!-- About Me (Left Sidebar) End -->

			<!-- Blog Post (Right Sidebar) Start -->
			<div class="col-md-9">
				<div class="col-md-12 page-body">
					<div class="row">
						<div class="sub-title">
							<a href="/" title="Go to Home Page">
								<h2>返回首页</h2>
							</a>
							<a href="#comment" class="smoth-scroll"><i class="icon-bubbles"></i></a>
						</div>

						<div class="col-md-12 content-page">
							<div class="col-md-12 blog-post">
								<!-- Post Headline Start -->
								<div class="post-title">
									<h1>项目中常用的js封装</h1>
								</div>
								<!-- Post Headline End -->
								<!-- Post Detail Start -->
								<div class="post-info">
									<span>
										<i class="fas fa-calendar-alt"></i> 2018-07-17 &nbsp;&nbsp;
										<i class="fas fa-tags"></i> JavaScript
									</span>
								</div>
								<div class="post-content">
									<h4 id="判断undefined返回空字符串">判断undefined返回空字符串</h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//如果为undefined 返回空空字符串</span>
<span class="kd">function</span> <span class="nx">formatundefined</span><span class="p">(</span><span class="nx">str</span><span class="p">){</span>
	<span class="k">if</span><span class="p">(</span><span class="nx">str</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">str</span> <span class="o">==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">str</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">){</span>
		<span class="k">return</span> <span class="dl">""</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">str</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h4 id="点击事件-判断对应div是否已加载并显示">点击事件 判断对应div是否已加载并显示</h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="cm">/**
 * 点击事件 判断对应div是否已加载并显示
 * @param showClass  需要加载的div class名
 * @param loadUrl    请求url
 */</span>
<span class="kd">function</span> <span class="nx">showWidgets</span><span class="p">(</span><span class="nx">showClass</span><span class="p">,</span> <span class="nx">loadUrl</span><span class="p">){</span>	
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">$</span><span class="p">(</span><span class="nx">showClass</span><span class="p">).</span><span class="nx">is</span><span class="p">(</span><span class="dl">'</span><span class="s1">:empty</span><span class="dl">'</span><span class="p">)){</span>
        <span class="kd">var</span> <span class="nx">status</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">showClass</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="dl">'</span><span class="s1">display</span><span class="dl">'</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">status</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">block</span><span class="dl">'</span><span class="p">){</span>
            <span class="nx">$</span><span class="p">(</span><span class="nx">showClass</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="dl">'</span><span class="s1">display</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span><span class="p">);</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="nx">$</span><span class="p">(</span><span class="nx">showClass</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">showClass</span><span class="p">).</span><span class="nx">load</span><span class="p">(</span><span class="nx">loadUrl</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">showClass</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="cm">/**
 * 点击事件 判断对应div是否已加载并显示
 * 两次id相同则显示隐藏,不同直接加载
 * @param showClass  需要加载的div class名
 * @param preid    之前的id
 * @param curid    现在的id
 * 
 */</span>
<span class="kd">function</span> <span class="nx">showWidgetsById</span><span class="p">(</span><span class="nx">showClass</span><span class="p">,</span> <span class="nx">loadUrl</span><span class="p">,</span><span class="nx">preid</span><span class="p">,</span><span class="nx">curid</span><span class="p">){</span>
	<span class="k">if</span><span class="p">(</span><span class="nx">preid</span><span class="o">==</span><span class="nx">curid</span><span class="p">){</span>
		<span class="nx">showWidgets</span><span class="p">(</span><span class="nx">showClass</span><span class="p">,</span><span class="nx">loadUrl</span><span class="p">);</span>
	<span class="p">}</span><span class="k">else</span><span class="p">{</span>
		<span class="nx">$</span><span class="p">(</span><span class="nx">showClass</span><span class="p">).</span><span class="nx">load</span><span class="p">(</span><span class="nx">loadUrl</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">showClass</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h4 id="ajax封装">ajax封装</h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="cm">/**
 * 
 * @param type GET/POST
 * @param url  请求路径
 * @param data 请求对象,没有就null
 * @param successFun 回调函数
 * @param async  true异步,false同步
 */</span>
<span class="kd">function</span> <span class="nx">send</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span><span class="nx">url</span><span class="p">,</span><span class="nx">data</span><span class="p">,</span><span class="nx">successFun</span><span class="p">,</span><span class="k">async</span><span class="p">){</span>
	<span class="kd">var</span> <span class="nx">sessionId</span> <span class="o">=</span> <span class="nx">getSessionId</span><span class="p">();</span>
	<span class="k">if</span><span class="p">(</span><span class="nx">sessionId</span><span class="o">==</span><span class="kc">null</span><span class="o">||</span><span class="nx">sessionId</span><span class="o">==</span><span class="kc">undefined</span><span class="o">||</span><span class="nx">sessionId</span><span class="o">==</span><span class="dl">""</span><span class="p">){</span>
		 <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="o">=</span><span class="dl">"</span><span class="s2">/jczh/login.html</span><span class="dl">"</span><span class="p">;</span>
		 <span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="kd">var</span> <span class="nx">retObj</span><span class="p">;</span>
	<span class="kd">var</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">param</span><span class="dl">"</span><span class="p">:</span><span class="dl">""</span><span class="p">,</span><span class="dl">"</span><span class="s2">sessionId</span><span class="dl">"</span><span class="p">:</span><span class="nx">sessionId</span><span class="p">};</span>
	<span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="o">!=</span><span class="kc">null</span><span class="p">){</span>
		<span class="nx">param</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">param</span><span class="dl">"</span> <span class="p">:</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span><span class="dl">"</span><span class="s2">sessionId</span><span class="dl">"</span><span class="p">:</span><span class="nx">sessionId</span><span class="p">};</span>
	<span class="p">}</span>
	<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
		<span class="na">type</span><span class="p">:</span><span class="nx">type</span><span class="p">,</span>
		<span class="na">url</span><span class="p">:</span><span class="nx">server_url</span><span class="o">+</span><span class="nx">url</span><span class="p">,</span>
		<span class="na">contentType</span><span class="p">:</span><span class="dl">"</span><span class="s2">application/x-www-form-urlencoded;charset=UTF-8</span><span class="dl">"</span><span class="p">,</span><span class="c1">//格式</span>
		<span class="na">dataType</span><span class="p">:</span><span class="dl">'</span><span class="s1">json</span><span class="dl">'</span><span class="p">,</span> 
		<span class="na">data</span><span class="p">:</span><span class="nx">param</span><span class="p">,</span>	
		<span class="na">async</span><span class="p">:</span><span class="k">async</span><span class="p">,</span>
		<span class="na">cache</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
		<span class="na">beforeSend</span><span class="p">:</span><span class="kd">function</span><span class="p">(){</span>
		<span class="p">},</span>
		<span class="na">complete</span><span class="p">:</span><span class="kd">function</span><span class="p">(){</span>
		<span class="p">},</span>
		<span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(){</span>
			<span class="c1">//alert("访问后台"+url +"异常,请联系管理员!");</span>
		<span class="p">},</span>
		<span class="na">success</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>	
			 <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">code</span><span class="o">==-</span><span class="mi">1</span><span class="p">){</span>	
				 <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="o">=</span><span class="dl">"</span><span class="s2">/jczh/login.html</span><span class="dl">"</span><span class="p">;</span>
			 <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">code</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
				 <span class="c1">//后端出错</span>
				 <span class="nx">alert</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
			 <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">code</span><span class="o">==</span><span class="mi">2</span><span class="p">){</span>
				 <span class="c1">//成功,比如新增成功,需要输出的</span>
				 <span class="nx">alert</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
				 <span class="k">if</span><span class="p">(</span><span class="nx">successFun</span><span class="o">!=</span><span class="kc">null</span><span class="p">){</span>
					 <span class="nx">successFun</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
				 <span class="p">}</span>
			 <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">code</span><span class="o">=</span><span class="mi">1</span><span class="p">){</span>
				 <span class="c1">//数据回调</span>
				 <span class="k">if</span><span class="p">(</span><span class="nx">successFun</span><span class="o">!=</span><span class="kc">null</span><span class="p">){</span>
					 <span class="nx">successFun</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
				 <span class="p">}</span>
			 <span class="p">}</span>
			 <span class="nx">retObj</span><span class="o">=</span><span class="nx">data</span><span class="p">;</span>
		<span class="p">}</span>
    <span class="p">});</span>
	<span class="k">return</span> <span class="nx">retObj</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h4 id="上传文件">上传文件</h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">fileUpLoad</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span><span class="nx">url</span><span class="p">,</span><span class="nx">data</span><span class="p">,</span><span class="nx">successFun</span><span class="p">,</span><span class="k">async</span><span class="p">,</span><span class="nx">fileButtonId</span><span class="p">){</span>
	<span class="kd">var</span> <span class="nx">sessionId</span> <span class="o">=</span> <span class="nx">getSessionId</span><span class="p">();</span>
	<span class="k">if</span><span class="p">(</span><span class="nx">sessionId</span><span class="o">==</span><span class="kc">null</span><span class="o">||</span><span class="nx">sessionId</span><span class="o">==</span><span class="kc">undefined</span><span class="o">||</span><span class="nx">sessionId</span><span class="o">==</span><span class="dl">""</span><span class="p">){</span>
		 <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="o">=</span><span class="dl">"</span><span class="s2">/jczh/login.html</span><span class="dl">"</span><span class="p">;</span>
		 <span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="kd">var</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">param</span><span class="dl">"</span><span class="p">:</span><span class="dl">""</span><span class="p">,</span><span class="dl">"</span><span class="s2">sessionId</span><span class="dl">"</span><span class="p">:</span><span class="nx">sessionId</span><span class="p">};</span>
	<span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="o">!=</span><span class="kc">null</span><span class="p">){</span>
		<span class="nx">param</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">param</span><span class="dl">"</span> <span class="p">:</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span><span class="dl">"</span><span class="s2">sessionId</span><span class="dl">"</span><span class="p">:</span><span class="nx">sessionId</span><span class="p">};</span>
	<span class="p">}</span>
	<span class="nx">$</span><span class="p">.</span><span class="nx">ajaxFileUpload</span><span class="p">({</span>
		<span class="na">secureuri</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
		<span class="na">fileElementId</span><span class="p">:</span><span class="nx">fileButtonId</span><span class="p">,</span>
		<span class="na">datatype</span><span class="p">:</span><span class="dl">'</span><span class="s1">json</span><span class="dl">'</span><span class="p">,</span>
		<span class="na">async</span><span class="p">:</span><span class="k">async</span><span class="p">,</span>
		<span class="na">url</span><span class="p">:</span><span class="nx">server_url</span><span class="o">+</span><span class="nx">url</span><span class="p">,</span>
		<span class="na">type</span><span class="p">:</span><span class="nx">type</span><span class="p">,</span>
		<span class="na">data</span><span class="p">:</span><span class="nx">param</span><span class="p">,</span>
		<span class="na">beforeSend</span><span class="p">:</span><span class="kd">function</span><span class="p">(){</span>
			<span class="c1">//传数据之前处理函数(可不用写)</span>
		<span class="p">},</span>
		<span class="na">success</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">reply</span><span class="p">){</span>
		<span class="p">},</span>
		<span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
			<span class="c1">//错误处理函数</span>
		<span class="p">},</span>
		<span class="na">complete</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">replay</span><span class="p">){</span>
			<span class="c1">//传数据完成处理函数(可不用写)</span>
			<span class="k">try</span><span class="p">{</span>
				<span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="nx">replay</span><span class="p">.</span><span class="nx">responseText</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">{</span><span class="dl">"</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">}</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
				<span class="nx">str</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">{</span><span class="dl">"</span><span class="o">+</span><span class="nx">str</span><span class="o">+</span><span class="dl">"</span><span class="s2">}</span><span class="dl">"</span><span class="p">;</span>
				<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">str</span><span class="p">);</span>
				<span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">code</span><span class="o">==-</span><span class="mi">1</span><span class="p">){</span>	
					 <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="o">=</span><span class="dl">"</span><span class="s2">/jczh/login.html</span><span class="dl">"</span><span class="p">;</span>
				 <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">code</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
					 <span class="c1">//后端出错</span>
					 <span class="nx">alert</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
				 <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">code</span><span class="o">==</span><span class="mi">2</span><span class="p">){</span>
					 <span class="c1">//成功,比如新增成功,需要输出的</span>
					 <span class="nx">alert</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
					 <span class="k">if</span><span class="p">(</span><span class="nx">successFun</span><span class="o">!=</span><span class="kc">null</span><span class="p">){</span>
						 <span class="nx">successFun</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
					 <span class="p">}</span>
				 <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">code</span><span class="o">=</span><span class="mi">1</span><span class="p">){</span>
					 <span class="c1">//数据回调</span>
					 <span class="k">if</span><span class="p">(</span><span class="nx">successFun</span><span class="o">!=</span><span class="kc">null</span><span class="p">){</span>
						 <span class="nx">successFun</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
					 <span class="p">}</span>
				 <span class="p">}</span>
			<span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){}</span>
		<span class="p">}</span>
    <span class="p">});</span>
<span class="p">}</span></code></pre></figure>

<h4 id="往sessionstorage中存入移除获取数据以及获取用户信息">往sessionStorage中存入，移除，获取数据，以及获取用户信息</h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="cm">/**
 * 往会话中存数据
 * @param key
 * @param value
 */</span>
<span class="kd">function</span> <span class="nx">putSessionData</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span><span class="nx">value</span><span class="p">){</span>
	<span class="nb">window</span><span class="p">.</span><span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">value</span><span class="p">));</span>
<span class="p">}</span>

<span class="cm">/**
 * 往会话中移除数据
 * @param key
 * @param value
 */</span>
<span class="kd">function</span> <span class="nx">removeSessionData</span><span class="p">(</span><span class="nx">key</span><span class="p">){</span>
	<span class="nb">window</span><span class="p">.</span><span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**
 * 往会话中获取数据
 * @param key
 */</span>
<span class="kd">function</span> <span class="nx">getSessionData</span><span class="p">(</span><span class="nx">key</span><span class="p">){</span>
	<span class="k">try</span><span class="p">{</span>
		<span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">parseJSON</span><span class="p">(</span><span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">key</span><span class="p">));</span>	
	<span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
		<span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="cm">/**
 * 往会话中获取用户信息
 * @param key
 */</span>
<span class="kd">function</span> <span class="nx">getSessionUserInfo</span><span class="p">(){</span>
	<span class="kd">var</span> <span class="nx">userInfo</span> <span class="o">=</span> <span class="nx">getSessionData</span><span class="p">(</span><span class="dl">"</span><span class="s2">userInfo</span><span class="dl">"</span><span class="p">);</span>
	<span class="k">if</span><span class="p">(</span><span class="nx">userInfo</span><span class="o">==</span><span class="kc">null</span><span class="p">){</span>
		<span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="o">=</span><span class="dl">"</span><span class="s2">/jczh/login.html</span><span class="dl">"</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">userInfo</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">getSessionId</span><span class="p">(){</span>
	<span class="kd">var</span> <span class="nx">userInfo</span> <span class="o">=</span> <span class="nx">getSessionData</span><span class="p">(</span><span class="dl">"</span><span class="s2">userInfo</span><span class="dl">"</span><span class="p">);</span>
	<span class="k">if</span><span class="p">(</span><span class="nx">userInfo</span><span class="o">==</span><span class="kc">null</span><span class="p">){</span>
		<span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">userInfo</span><span class="p">.</span><span class="nx">sessionId</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h4 id="通过key来获取html后面的数据">通过key来获取html?后面的数据</h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="cm">/**
 * 通过key来获取html?后面的数据
 * */</span>
<span class="kd">function</span> <span class="nx">getUrlParam</span><span class="p">(</span><span class="nx">key</span><span class="p">){</span>  
    <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nb">decodeURI</span><span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^</span><span class="se">\?</span><span class="sr">/</span><span class="p">,</span><span class="dl">''</span><span class="p">)).</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="s1">&amp;</span><span class="dl">'</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">paramsObj</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">iLen</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">iLen</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">param</span> <span class="o">=</span> <span class="nx">url</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="s1">=</span><span class="dl">'</span><span class="p">);</span>
        <span class="nx">paramsObj</span><span class="p">[</span><span class="nx">param</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">param</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">key</span><span class="p">){</span>
        <span class="k">return</span> <span class="nx">paramsObj</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">||</span> <span class="dl">''</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">paramsObj</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h4 id="判断数据类型">判断数据类型</h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="cm">/**
 * 判断数据类型
 */</span>
<span class="kd">var</span> <span class="nx">toString</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">type</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">elem</span> <span class="o">+</span> <span class="dl">''</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">elem</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">[\[\]]</span><span class="sr">/g</span><span class="p">,</span> <span class="dl">''</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">();</span>
<span class="p">}</span></code></pre></figure>

<h4 id="判断数组是否包含元素">判断数组是否包含元素</h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="cm">/**
 * 判断数组是否包含元素
 * @param arr
 * @param obj
 * @returns {Boolean}
 */</span>
<span class="kd">function</span>  <span class="nx">contains</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="nx">obj</span><span class="p">){</span>
	<span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
	<span class="k">while</span><span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">){</span>
		<span class="k">if</span><span class="p">(</span><span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="nx">obj</span><span class="p">){</span>
			<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h4 id="移除数组里的元素">移除数组里的元素</h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="cm">/**
 * 移除数组里的元素
 * @param arr
 * @param obj
 * @returns {Array}
 */</span>
<span class="kd">function</span> <span class="nx">remove</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="nx">obj</span><span class="p">){</span>
	<span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
	<span class="kd">var</span> <span class="nx">newarr</span> <span class="o">=</span>  <span class="k">new</span> <span class="nb">Array</span><span class="p">();</span>
	<span class="k">while</span><span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">){</span>
		<span class="k">if</span><span class="p">(</span><span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">!=</span> <span class="nx">obj</span><span class="p">){</span>
			<span class="nx">newarr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">newarr</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h4 id="原生拖拽">原生拖拽</h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">dragEvent</span><span class="p">(</span><span class="nx">drag</span><span class="p">,</span><span class="nx">dbody</span><span class="p">){</span>   
	<span class="nb">window</span><span class="p">.</span><span class="nx">getSelection</span> <span class="p">?</span> <span class="nb">window</span><span class="p">.</span><span class="nx">getSelection</span><span class="p">().</span><span class="nx">removeAllRanges</span><span class="p">()</span> <span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">selection</span><span class="p">.</span><span class="nx">empty</span><span class="p">();</span>
	<span class="nx">drag</span><span class="p">.</span><span class="nx">onmousedown</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">event</span> <span class="o">=</span> <span class="nx">event</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">pageX</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pageX</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">+</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">pageY</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pageY</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">+</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">;</span>   
        <span class="kd">var</span> <span class="nx">bodyX</span> <span class="o">=</span> <span class="nx">pageX</span> <span class="o">-</span> <span class="nx">dbody</span><span class="p">.</span><span class="nx">offsetLeft</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">bodyY</span> <span class="o">=</span> <span class="nx">pageY</span> <span class="o">-</span> <span class="nx">dbody</span><span class="p">.</span><span class="nx">offsetTop</span><span class="p">;</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">getSelection</span> <span class="p">?</span> <span class="nb">window</span><span class="p">.</span><span class="nx">getSelection</span><span class="p">().</span><span class="nx">removeAllRanges</span><span class="p">()</span> <span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">selection</span><span class="p">.</span><span class="nx">empty</span><span class="p">();</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">onmousemove</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">event</span> <span class="o">=</span> <span class="nx">event</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">pageX</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pageX</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">+</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">pageY</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pageY</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">+</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">;</span>
            <span class="nx">dbody</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">pageX</span> <span class="o">-</span> <span class="nx">bodyX</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">px</span><span class="dl">"</span><span class="p">;</span>
            <span class="nx">dbody</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="nx">pageY</span> <span class="o">-</span> <span class="nx">bodyY</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">px</span><span class="dl">"</span><span class="p">;</span>
            <span class="nb">window</span><span class="p">.</span><span class="nx">getSelection</span> <span class="p">?</span> <span class="nb">window</span><span class="p">.</span><span class="nx">getSelection</span><span class="p">().</span><span class="nx">removeAllRanges</span><span class="p">()</span> <span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">selection</span><span class="p">.</span><span class="nx">empty</span><span class="p">();</span>

        <span class="p">};</span>
    <span class="p">};</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">onmouseup</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">onmousemove</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">};</span></code></pre></figure>

<h4 id="判断是否有下级ul">判断是否有下级ul</h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">haschildrenUL</span><span class="p">(</span><span class="nx">classname</span><span class="p">,</span><span class="nx">addclass</span><span class="p">){</span>
	<span class="kd">var</span> <span class="nx">Userlistli</span> <span class="o">=</span>  <span class="nx">$</span><span class="p">(</span><span class="nx">classname</span><span class="p">);</span> 
	<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">z</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">z</span> <span class="o">&lt;</span> <span class="nx">Userlistli</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">z</span><span class="o">++</span> <span class="p">){</span>  
		<span class="kd">var</span> <span class="nx">haschildrenUl</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">Userlistli</span><span class="p">[</span><span class="nx">z</span><span class="p">]).</span><span class="nx">find</span><span class="p">(</span><span class="dl">"</span><span class="s2">ul</span><span class="dl">"</span><span class="p">);</span>
		<span class="k">if</span><span class="p">(</span> <span class="nx">haschildrenUl</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="p">){</span>
			<span class="kd">var</span> <span class="nx">hasi</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">Userlistli</span><span class="p">[</span><span class="nx">z</span><span class="p">]).</span><span class="nx">find</span><span class="p">(</span><span class="dl">"</span><span class="s2">i</span><span class="dl">"</span><span class="p">);</span>
			<span class="nx">$</span><span class="p">(</span><span class="nx">hasi</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
			<span class="nx">$</span><span class="p">(</span><span class="nx">hasi</span><span class="p">).</span><span class="nx">parent</span><span class="p">().</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">addclass</span><span class="p">);</span>
		<span class="p">}</span>		 
	<span class="p">}</span> 
<span class="p">}</span></code></pre></figure>

<h4 id="判断是否谷歌浏览器">判断是否谷歌浏览器</h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="cm">/**
 * 判断是否谷歌浏览器
 * @returns {Boolean}
 */</span>
<span class="kd">function</span> <span class="nx">isChrome</span><span class="p">(){</span>
	<span class="k">if</span><span class="p">(</span><span class="nb">navigator</span><span class="p">){</span>
		<span class="kd">var</span> <span class="nx">userAgent</span> <span class="o">=</span> <span class="nb">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">;</span>
		<span class="k">if</span><span class="p">(</span><span class="nx">userAgent</span><span class="p">){</span>
			<span class="k">if</span><span class="p">(</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="dl">"</span><span class="s2">Chrome</span><span class="dl">"</span><span class="p">)</span><span class="o">&gt;-</span><span class="mi">1</span><span class="p">){</span>
				<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h4 id="往数组里面增加属性">往数组里面增加属性</h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="cm">/**
 * 往数组里面增加属性
 * @param array
 * @param dataType
 */</span>
<span class="kd">function</span> <span class="nx">addDataType</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span><span class="nx">dataType</span><span class="p">){</span>
	<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">array</span><span class="p">){</span>
		<span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">dataType</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h4 id="获取当前日期时间-格式yyyy-mm-dd-hhmmss">获取当前日期时间 格式”yyyy-MM-dd HH:MM:SS”</h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//获取当前日期时间 格式"yyyy-MM-dd HH:MM:SS"</span>
<span class="kd">function</span> <span class="nx">getNowFormatDate</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">seperator1</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">-</span><span class="dl">"</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">seperator2</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">:</span><span class="dl">"</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">month</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">strDate</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">month</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">month</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">){</span>
        <span class="nx">month</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">month</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strDate</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">strDate</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">){</span>
        <span class="nx">strDate</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">strDate</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="kd">var</span> <span class="nx">currentdata</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">+</span> <span class="nx">seperator1</span> <span class="o">+</span> <span class="nx">month</span> <span class="o">+</span> <span class="nx">seperator1</span> <span class="o">+</span> <span class="nx">strDate</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span> <span class="o">+</span> <span class="nx">seperator2</span> <span class="o">+</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMinutes</span><span class="p">()</span> <span class="o">+</span> <span class="nx">seperator2</span> <span class="o">+</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getSeconds</span><span class="p">();</span>
    
    <span class="k">return</span> <span class="nx">currentdata</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h4 id="获取当前日期前一个月时间-格式yyyy-mm-dd-hhmmss">获取当前日期前一个月时间 格式”yyyy-MM-dd HH:MM:SS”</h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">getLastFormatDate</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
    <span class="nx">date</span><span class="p">.</span><span class="nx">setMonth</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">seperator1</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">-</span><span class="dl">"</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">seperator2</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">:</span><span class="dl">"</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">year</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">month</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
	<span class="kd">var</span> <span class="nx">strDate</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span>
	<span class="kd">var</span> <span class="nx">hours</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getHours</span><span class="p">();</span>
	<span class="kd">var</span> <span class="nx">seconds</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getSeconds</span><span class="p">();</span>
	<span class="kd">var</span> <span class="nx">minutes</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMinutes</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">month</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">month</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">){</span>
        <span class="nx">month</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">month</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">strDate</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">strDate</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">){</span>
        <span class="nx">strDate</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">strDate</span><span class="p">;</span>
	<span class="p">}</span>
	
	 <span class="k">if</span> <span class="p">(</span><span class="nx">hours</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">hours</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">){</span>
        <span class="nx">hours</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">hours</span><span class="p">;</span>
	<span class="p">}</span>
	 <span class="k">if</span> <span class="p">(</span><span class="nx">seconds</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">seconds</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">){</span>
        <span class="nx">seconds</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">seconds</span><span class="p">;</span>
	<span class="p">}</span>
	 <span class="k">if</span> <span class="p">(</span><span class="nx">minutes</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">minutes</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">){</span>
        <span class="nx">minutes</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">minutes</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="kd">var</span> <span class="nx">lastdata</span> <span class="o">=</span> <span class="nx">year</span> <span class="o">+</span> <span class="nx">seperator1</span> <span class="o">+</span> <span class="nx">month</span> <span class="o">+</span> <span class="nx">seperator1</span> <span class="o">+</span> <span class="nx">strDate</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">hours</span> <span class="o">+</span> <span class="nx">seperator2</span> <span class="o">+</span> <span class="nx">minutes</span> <span class="o">+</span> <span class="nx">seperator2</span> <span class="o">+</span> <span class="nx">seconds</span><span class="p">;</span>
    
    <span class="k">return</span> <span class="nx">lastdata</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h4 id="随机生产6位数的数字">随机生产6位数的数字</h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span>  <span class="nx">getUUidNum</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">code</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">900000</span><span class="p">)</span><span class="o">+</span><span class="mi">100000</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">code</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h4 id="获取当天日期获取前n天的日期">获取当天日期，获取前n天的日期</h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//获取当天日期</span>
<span class="kd">function</span> <span class="nx">getCurrentDate</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">year</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">mon</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">day</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span>
    <span class="nx">s</span> <span class="o">=</span> <span class="nx">year</span><span class="o">+</span><span class="dl">"</span><span class="s2">-</span><span class="dl">"</span><span class="o">+</span><span class="p">(</span><span class="nx">mon</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">?(</span><span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="o">+</span><span class="nx">mon</span><span class="p">):</span><span class="nx">mon</span><span class="p">)</span><span class="o">+</span><span class="dl">"</span><span class="s2">-</span><span class="dl">"</span><span class="o">+</span><span class="p">(</span><span class="nx">day</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">?(</span><span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="o">+</span><span class="nx">day</span><span class="p">):</span><span class="nx">day</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">s</span><span class="p">;</span>
<span class="p">}</span>


<span class="c1">//获取前n天的日期</span>
<span class="kd">function</span> <span class="nx">getBeforeDate</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">n</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">year</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">mon</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">day</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">day</span><span class="o">&lt;=</span><span class="nx">n</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">mon</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">){</span>
            <span class="nx">mon</span> <span class="o">=</span> <span class="nx">mon</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="nx">year</span> <span class="o">=</span> <span class="nx">year</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
            <span class="nx">mon</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">d</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span><span class="o">-</span><span class="nx">n</span><span class="p">);</span>
    <span class="nx">year</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
    <span class="nx">mon</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="nx">day</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span>
    <span class="nx">s</span> <span class="o">=</span> <span class="nx">year</span><span class="o">+</span><span class="dl">"</span><span class="s2">-</span><span class="dl">"</span><span class="o">+</span><span class="p">(</span><span class="nx">mon</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">?(</span><span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="o">+</span><span class="nx">mon</span><span class="p">):</span><span class="nx">mon</span><span class="p">)</span><span class="o">+</span><span class="dl">"</span><span class="s2">-</span><span class="dl">"</span><span class="o">+</span><span class="p">(</span><span class="nx">day</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">?(</span><span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="o">+</span><span class="nx">day</span><span class="p">):</span><span class="nx">day</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">s</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h4 id="返回顶部">返回顶部</h4>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
** Scroll To Top 
** 选择器为 .scroll-to-top
*/</span>
<span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">scroll</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">scrollTop</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mi">500</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.scroll-to-top</span><span class="dl">'</span><span class="p">).</span><span class="nx">fadeIn</span><span class="p">();</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
	<span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.scroll-to-top</span><span class="dl">'</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">();</span>
	<span class="p">}</span>
<span class="p">});</span>


<span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.scroll-to-top</span><span class="dl">'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
	<span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">html, body</span><span class="dl">'</span><span class="p">).</span><span class="nx">animate</span><span class="p">({</span> <span class="na">scrollTop</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span> <span class="mi">800</span><span class="p">);</span>
	<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div></div>

<h4 id="获取一个对象的长度">获取一个对象的长度</h4>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
** Object.keys() 方法会返回一个由一个给定对象的自身可枚举属性组成的数组，数组中属性名的排列顺序和使用 for...in 循环遍历该对象时返回的顺序一致 。
** 语法 Object.keys(obj)
*/</span>
<span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">];</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">arr</span><span class="p">));</span> <span class="c1">// console: ['0', '1', '2']</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">arr</span><span class="p">).</span><span class="nx">length</span><span class="p">);</span> <span class="c1">// console: 3</span>
</code></pre></div></div>

								</div>
								<!-- Post Detail End -->
							</div>
						</div>
						<!-- Blog Post (Right Sidebar) End -->
					</div>
				</div>
				<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
var disqus_config = function () {
    this.page.url = "http://localhost:4000/javascript/2018/07/17/js01.html";
    this.page.identifier = "/javascript/2018/07/17/js01.html";
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://cbpi.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

 				<!-- Footer Start -->
<div class="col-md-12 page-body margin-top-50 footer">
	<footer>
		<ul class="menu-link">
			<li><a href="/">首页</a></li>
			<li><a href="/about">关于</a></li>
			<li><a href="/category">分类</a></li>
		</ul>
		<p>© Copyright 2018 Drakecb. All rights reserved</p>

		<!-- UiPasta Credit Start -->
		<div class="uipasta-credit">我的另一个主页 <a href="https://drakecb.me" target="_blank">Drakecb.me</a></div>
		<!-- UiPasta Credit End -->
	</footer>
</div>
<!-- Footer End -->

			</div>
				<!-- Back to Top Start -->
	<a href="#" class="scroll-to-top"><i class="fas fa-long-arrow-alt-up"></i></a>
	<!-- Back to Top End -->
	<!-- All Javascript Plugins  -->
	
	<script type="text/javascript" src="/js/plugin.js"></script>
	<!-- Main Javascript File  -->
	<script type="text/javascript" src="/js/scripts.js"></script>
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120619613-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];

		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'UA-120619613-1');
		$('table').addClass('table table-striped table-bordered')
	</script>
</body>
</html>

